<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.2/css/all.css">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css" />
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <!-- weight 400 -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">

    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <title>TOD E-Commerce</title>
</head>
<body>
    <div class="wrapp-page-blog">
        <!-- header -->
        <div class="header" style="background-image: url(../images/header-about.png);">
            <div class="wrapp-txt-header">
                <div class="desk-header">
                    <ul class="list-link-page">
                        <p class="link-page" onclick="toPage('home')" style="margin: 0; cursor: pointer;">Home/</p>
                        <p class="link-page" onclick="toPage('blog')" style="margin: 0; cursor: pointer;">Blog</p>
                    </ul>
                    <p class="txt-header">
                        BLOG
                    </p>
                </div>
            </div>
        </div>

        <!-- content -->
        <div class="content-page-blog">
            <div class="container-content">
                <!-- card -->
                <div id="container-card" class="container-card"></div>

                <!-- pagination -->
                <div class="pagination">
                    <i id="left-pagination" class="fa-solid fa-angle-left" style="margin-right: 3px; display: none;" onclick="clickLeftPaginate()"></i>
                    <ul id="list-index-paginate" class="list-index-paginate"></ul>
                    <i id="right-pagination" class="fa-solid fa-angle-right" style="margin-left: 3px;" onclick="clickRightPaginate()"></i>
                </div>
            </div>
        </div>
    </div>

    <script>
// card shop
// data page shop
const dataShop = [
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Baju',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Baju',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Baju',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Baju',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
            {
                img: 'images/products.jfif',
                gender: 'Men',
                nameProducts: 'Sepatu',
                price: 'Rp 1,000,000'
            },
        ]

        const dataBlog = [
            {
                img: 'images/products.jfif',
                date: 'JUN 19, 2021',
                byAuthor: 'by Admin',
                title: 'NUNC RHONCUS AUCTOR RISUS TEMPOR',
                deskripsi: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Quo fugiat earum nobis, tempora repellendus veniam fuga debitis impedit in quia dolore eaque veritatis perspiciatis nulla aut, dicta voluptatibus ipsa consectetur?'
            },
        ]

        const list_element = document.getElementById('card-shop')
        const list_element_blog = document.getElementById('container-card')
        const pagination = document.getElementById('list-index-paginate')

        let current_page = 1
        let rows = 8
        let rowsBlog = 4

        const newPathName = window.location.pathname.split('/')[2]

        function DisplayList(items, wrapper, rows_per_page, page) {
            wrapper.innerHTML = ''
            page--

            let start = rows_per_page * page
            let end = start + rows_per_page
            let paginatedItems = items.slice(start, end)

            let newData = []
            let newDataBlog = []

            if(newPathName === 'shop'){
                for (let i = 0; i < paginatedItems.length; i++) {
                    let item = paginatedItems[i]
                    newData.push(item)
                }

            wrapper.innerHTML = newData.map((e) => {
                    return `<div class="card-products">
                    <img src="${e.img}" alt="" class="img-products">
                                <p class="gender">
                                    ${e.gender}
                                </p>
                                <p class="name-products">
                                    ${e.nameProducts.length > 35 ? `${e.nameProducts.substr(0, 35)}...` : e.nameProducts}
                                </p>
                                <p class="price">
                                    ${e.price}
                                </p>
                                <button class="view-product">
                                    View Product
                                </button>
                    </div>`
                }).join('')
            }

            if(newPathName === 'blog'){
                for (let i = 0; i < paginatedItems.length; i++) {
                    let item = paginatedItems[i]
                    newDataBlog.push(item)
                }

            wrapper.innerHTML = newDataBlog.map((e) => {
                    return `<div class="card-blog">
                        <img src="${e.img}" alt="" class="img-card">

                        <div class="author">
                            <p class="date">
                                ${e.date}
                            </p>
                            <p class="by-author">
                                â€¢ ${e.byAuthor}
                            </p>
                        </div>
                        <p class="title">
                            ${e.title}
                        </p>
                        <p class="deskripsi">
                            ${e.deskripsi}
                        </p>

                        <button class="read-more">
                            Read More <i class="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>`
                }).join('')
            }
        }

        const leftPagination = document.getElementById('left-pagination')
        const rightPagination = document.getElementById('right-pagination')

        function clickPaginate(index) {
            current_page = index
            if(newPathName === 'shop'){
                DisplayList(dataShop, list_element, rows, index)

                setTimeout(() => {
                    SetupPagination(dataShop, pagination, rows)
                }, 0)
            }

            if(newPathName === 'blog'){
                DisplayList(dataBlog, list_element_blog, rowsBlog, index)

                setTimeout(() => {
                    SetupPagination(dataBlog, pagination, rowsBlog)
                }, 0)
            }
            
            const indexPaginate = document.getElementsByClassName('index-paginate')

            leftPagination.style.display = 'flex'
            rightPagination.style.display = 'flex'

            if(current_page === 1){
                leftPagination.style.display = 'none'
            }else if(current_page === indexPaginate.length){
                rightPagination.style.display = 'none'
            }

            window.scrollTo(0, 200)
        }

        function clickLeftPaginate() {
            if (current_page > 1) {
                current_page = current_page - 1

                if(newPathName === 'shop'){
                    DisplayList(dataShop, list_element, rows, current_page)

                    setTimeout(() => {
                        SetupPagination(dataShop, pagination, rows)
                    }, 0)
                }

                if(newPathName === 'blog'){
                    DisplayList(dataBlog, list_element_blog, rowsBlog, current_page)

                    setTimeout(() => {
                        SetupPagination(dataBlog, pagination, rowsBlog)
                    }, 0)
                }
                
                if(current_page === 1){
                    leftPagination.style.display = 'none'
                }
                rightPagination.style.display = 'flex'

                window.scrollTo(0, 200)
            }
        }

        function clickRightPaginate() {
            const indexPaginate = document.getElementsByClassName('index-paginate')

            if (current_page < indexPaginate.length) {
                current_page = current_page + 1

                if(newPathName === 'shop'){
                    DisplayList(dataShop, list_element, rows, current_page)

                    setTimeout(() => {
                        SetupPagination(dataShop, pagination, rows)
                    }, 0)
                }

                if(newPathName === 'blog'){
                    DisplayList(dataBlog, list_element_blog, rowsBlog, current_page)

                    setTimeout(() => {
                        SetupPagination(dataBlog, pagination, rowsBlog)
                    }, 0)
                }

                if(current_page === indexPaginate.length){
                    rightPagination.style.display = 'none'
                }
                leftPagination.style.display = 'flex'

                window.scrollTo(0, 200)
            }
        }

        function SetupPagination(items, wrapper, rows_per_page) {
            wrapper.innerHTML = ''

            let dataPaginate = []

            let page_count = Math.ceil(items.length / rows_per_page - 1)
            for (let i = 0; i < page_count + 1; i++) {
                dataPaginate.push(i)
            }

            wrapper.innerHTML = dataPaginate.map((e) => {
                return `<li class="index-paginate ${current_page === e + 1 ? 'active-paginate' : ''}" onclick="clickPaginate(${e + 1})">
                                ${e + 1}
                            </li>`
            }).join('')
        }

        if(newPathName === 'shop'){
            DisplayList(dataShop, list_element, rows, current_page)
            SetupPagination(dataShop, pagination, rows)
        }

        if(newPathName === 'blog'){
            DisplayList(dataBlog, list_element_blog, rowsBlog, current_page)
            SetupPagination(dataBlog, pagination, rowsBlog)
        }
    </script>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
</body>
</html>